version: '0'
runner:
  name: mock
  #name: kubernetes
  kubernetes:
    kubeconfig: .kube/config
    image: quay.io/galexrt/container-toolbox
    namespace: acntt
tests:
- type: iperf3
  runOptions:
    rounds: 3
    interval: 5m
    mode: "sequential"
    parallelcount: 1
  # This hosts section would cause iperf3 to be run from all hosts to the hosts selected in the `destinations` section
  # Each entry will be merged into one list
  hosts:
    clients:
    - name: all-hosts
      all: true
    servers:
    - name: one-randomly-selected-server
      random: true
      count: 1
    - name: different-hosts-1
      random: true
      count: 2 # when more than one hosts is wanted,
      hostSelector: # For Labels in K8s and Variables of hosts in Ansible
        network-tests-run-here: "true"
      antiAffinity:
        - key: "openstack-region" # this makes sure hosts with different "openstack-region" are picked
    - name: specific-hosts
      hosts:
        - serverabc123
        - serverxyz789
  iperf3:
    windowSizeCalculation:
      auto: true
    additionalFlags:
      client:
        - --udp
      server: []
#- type: siege
#  runOptions:
#    rounds: 5
#    interval: 15m
#  siege: {}
