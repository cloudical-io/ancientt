{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"ancientt \u00b6 A tool to automate network testing tools, like iperf3, in dynamic environments such as Kubernetes and more to come dynamic environments. Features \u00b6 TL;DR A network test tool, like iperf3 can be run in, e.g., Kubernetes, cluster from all-to-all Nodes. Run network tests with the following projects: iperf3 Soon other tools will be available as well, like smokeping . Tests can be run through the following \"runners\": Ansible (an inventory file is needed) Kubernetes (a kubeconfig connected to a cluster) Results of the network tests can be output in different formats: CSV Dump (uses pp.Sprint() ( GitHub k0kubun/pp , dump pretty print library)) Excel files (Excelize) go-chart Charts (WIP) MySQL SQLite Usage \u00b6 Either build ( go get ) or download the Ancientt executable. A config file containing test definitions must be given by flag --testdefinition (or short flag -c ) or named testdefinition.yaml in the current directory. Below command will try loading your-testdefinitions.yaml as the test definitions config: 1 2 # You can also use the short flag `-c ancientt --testdefinition your-testdefinitions.yaml Demos \u00b6 See Demos . Goals of this Project \u00b6 A bit like Prometheus blackbox exporter which contains \"definitions\" for probes. The \"tests\" would be pluggable through a Golang interface. \"Runner\" interface, e.g., for Kubernetes, Ansible, etc. The \"runner\" abstracts the \"how it is run\", e.g., for Kubernetes creates a Job, Ansible (download and) trigger a playbook to run the test. Store result data in different formats, e.g., CSV, excel, MySQL Up for discussion: graph database ( Dgraph ) and / or TSDB support \"Visualization\" for humans, e.g., possibility to automatically draw \"shiny\" graphs from the results. Development \u00b6 Golang version : v1.15 or higher (tested with v1.15.2 on linux/amd64 ) Dependencies \u00b6 go mod is used to manage the depeendencies. Building \u00b6 Quickest way to just get ancientt built is to run the following command: 1 go get -u github.com/cloudical-io/ancientt/cmd/ancientt Licensing \u00b6 Ancientt is licensed under the Apache 2.0 License.","title":"ancientt"},{"location":"#ancientt","text":"A tool to automate network testing tools, like iperf3, in dynamic environments such as Kubernetes and more to come dynamic environments.","title":"ancientt"},{"location":"#features","text":"TL;DR A network test tool, like iperf3 can be run in, e.g., Kubernetes, cluster from all-to-all Nodes. Run network tests with the following projects: iperf3 Soon other tools will be available as well, like smokeping . Tests can be run through the following \"runners\": Ansible (an inventory file is needed) Kubernetes (a kubeconfig connected to a cluster) Results of the network tests can be output in different formats: CSV Dump (uses pp.Sprint() ( GitHub k0kubun/pp , dump pretty print library)) Excel files (Excelize) go-chart Charts (WIP) MySQL SQLite","title":"Features"},{"location":"#usage","text":"Either build ( go get ) or download the Ancientt executable. A config file containing test definitions must be given by flag --testdefinition (or short flag -c ) or named testdefinition.yaml in the current directory. Below command will try loading your-testdefinitions.yaml as the test definitions config: 1 2 # You can also use the short flag `-c ancientt --testdefinition your-testdefinitions.yaml","title":"Usage"},{"location":"#demos","text":"See Demos .","title":"Demos"},{"location":"#goals-of-this-project","text":"A bit like Prometheus blackbox exporter which contains \"definitions\" for probes. The \"tests\" would be pluggable through a Golang interface. \"Runner\" interface, e.g., for Kubernetes, Ansible, etc. The \"runner\" abstracts the \"how it is run\", e.g., for Kubernetes creates a Job, Ansible (download and) trigger a playbook to run the test. Store result data in different formats, e.g., CSV, excel, MySQL Up for discussion: graph database ( Dgraph ) and / or TSDB support \"Visualization\" for humans, e.g., possibility to automatically draw \"shiny\" graphs from the results.","title":"Goals of this Project"},{"location":"#development","text":"Golang version : v1.15 or higher (tested with v1.15.2 on linux/amd64 )","title":"Development"},{"location":"#dependencies","text":"go mod is used to manage the depeendencies.","title":"Dependencies"},{"location":"#building","text":"Quickest way to just get ancientt built is to run the following command: 1 go get -u github.com/cloudical-io/ancientt/cmd/ancientt","title":"Building"},{"location":"#licensing","text":"Ancientt is licensed under the Apache 2.0 License.","title":"Licensing"},{"location":"config-examples/","text":"Config Examples \u00b6 This page contains some example configurations. Be sure to also checkout the Demos page for examples with example ancientt output, config and a snippet or whole file of the output results. Kubernetes + IPerf3 = CSV Output: IPerf3 test between all to all Nodes \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 version : '0' runner : #name: mock name : kubernetes kubernetes : # Assuming you are in your home directory kubeconfig : .kube/config image : quay.io/galexrt/container-toolbox:v20210915-101121-713 namespace : ancientt timeouts : deleteTimeout : 20 runningTimeout : 60 succeedTimeout : 60 hosts : ignoreSchedulingDisabled : true tolerations : [] tests : - name : iperf3-one-rand-to-one-rand type : iperf3 transformations : - source : \"bits_per_second\" destination : \"gigabits_per_second\" action : \"add\" modifier : 100000000 modifierAction : \"division\" outputs : - name : csv csv : filePath : . namePattern : 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}.csv' # If you want one CSV per server and client host test run, you can use the following: #namePattern: 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}-{{ .Data.ServerHost }}_{{ .Data.ClientHost }}.csv' runOptions : continueOnError : true # If you wanna do the test(s) more than once in one go, set to higher than 1 rounds : 1 # Wait 10 seconds between each round interval : 10s mode : \"sequential\" parallelcount : 1 # This hosts section would cause iperf3 to be run from all hosts to the hosts selected in the `destinations` section # Each entry will be merged into one list hosts : clients : - name : all-hosts all : true servers : - name : all-hosts all : true iperf3 : udp : false duration : 10 interval : 1 additionalFlags : clients : [] server : []","title":"Config Examples"},{"location":"config-examples/#config-examples","text":"This page contains some example configurations. Be sure to also checkout the Demos page for examples with example ancientt output, config and a snippet or whole file of the output results.","title":"Config Examples"},{"location":"config-examples/#kubernetes-iperf3-csv-output-iperf3-test-between-all-to-all-nodes","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 version : '0' runner : #name: mock name : kubernetes kubernetes : # Assuming you are in your home directory kubeconfig : .kube/config image : quay.io/galexrt/container-toolbox:v20210915-101121-713 namespace : ancientt timeouts : deleteTimeout : 20 runningTimeout : 60 succeedTimeout : 60 hosts : ignoreSchedulingDisabled : true tolerations : [] tests : - name : iperf3-one-rand-to-one-rand type : iperf3 transformations : - source : \"bits_per_second\" destination : \"gigabits_per_second\" action : \"add\" modifier : 100000000 modifierAction : \"division\" outputs : - name : csv csv : filePath : . namePattern : 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}.csv' # If you want one CSV per server and client host test run, you can use the following: #namePattern: 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}-{{ .Data.ServerHost }}_{{ .Data.ClientHost }}.csv' runOptions : continueOnError : true # If you wanna do the test(s) more than once in one go, set to higher than 1 rounds : 1 # Wait 10 seconds between each round interval : 10s mode : \"sequential\" parallelcount : 1 # This hosts section would cause iperf3 to be run from all hosts to the hosts selected in the `destinations` section # Each entry will be merged into one list hosts : clients : - name : all-hosts all : true servers : - name : all-hosts all : true iperf3 : udp : false duration : 10 interval : 1 additionalFlags : clients : [] server : []","title":"Kubernetes + IPerf3 = CSV Output: IPerf3 test between all to all Nodes"},{"location":"config-structure/","text":"Config Structure \u00b6 This Document documents the types introduced by Ancientt for configuration to be used by users. NOTE : This document is generated from code comments. When contributing a change to this document please do so by changing the code comments. Table of Contents \u00b6 AdditionalFlags AnsibleGroups AnsibleTimeouts CSV Config Dump Excelize FilePath GoChart GoChartGraph Hosts IPerf3 KubernetesHosts KubernetesServiceAccounts KubernetesTimeouts MySQL Output PingParsing RunOptions Runner RunnerAnsible RunnerKubernetes RunnerMock SQLite Test TestHosts Transformation AdditionalFlags \u00b6 AdditionalFlags additional flags structure for Server and Clients Field Description Scheme Required Validation clients List of additional flags for clients []string false server List of additional flags for server []string false Back to TOC AnsibleGroups \u00b6 AnsibleGroups server and clients host group names in the used inventory file(s) Field Description Scheme Required Validation server Server inventory server group name string true clients Clients inventory clients group name string true Back to TOC AnsibleTimeouts \u00b6 AnsibleTimeouts timeouts for Ansible command runs Field Description Scheme Required Validation commandTimeout Timeout duration for ansible and ansible-inventory calls (NOT task command timeouts; default: 20s ) time.Duration false taskCommandTimeout Timeout duration for ansible Task command calls (default: 45s ) time.Duration false Back to TOC CSV \u00b6 CSV CSV Output config options Field Description Scheme Required Validation separator Separator which rune to use as a separator in the CSV file (default: ; ). *rune true Back to TOC Config \u00b6 Config Config object for the config file Field Description Scheme Required Validation version Version right now is just 0 , so we can keep track of config structure versioning. string true runner Runner Runner configuration to use. Runner true tests Tests List of Test s to run. []* Test true required,min=1 Back to TOC Dump \u00b6 Dump Dump Output config options Field Description Scheme Required Validation Back to TOC Excelize \u00b6 Excelize Excelize Output config options. TODO implement Field Description Scheme Required Validation saveAfterRows After what amount of rows the Excel file should be saved (default: 1 ) int false required,min=1 Back to TOC FilePath \u00b6 FilePath file path and name pattern for outputs file generation Field Description Scheme Required Validation filePath File base path for output string true required,min=1 namePattern File name pattern templated from various availables during output generation string true required,min=1 Back to TOC GoChart \u00b6 GoChart GoChart Output config options Field Description Scheme Required Validation graphs Graphs definitions of graphs to produce from the testers output data []* GoChartGraph true required,min=1 Back to TOC GoChartGraph \u00b6 GoChartGraph Type and columns for a one or two Y-axis chart (+ X-axis) to be generated based on this information. Field Description Scheme Required Validation timeColumn TimeColumn column with the time / interval to use for the X-axis string true required leftY LeftY name of the column / data column to use for the the left Y axis string false rightY RightY name of the column / data column to use for the the right Y axis string true required withLinearRegression WithLinearRegression if a linear regression series should be added to each data series (default: false ). *bool false withSimpleMovingAverage WithSimpleMovingAverage if a simple moving average should be added to each data series(default: false ). *bool false Back to TOC Hosts \u00b6 Hosts options for hosts selection for a Test Field Description Scheme Required Validation name Name of this hosts selection. string true all If all hosts available should be used (default: false ). *bool false random Select Count Random hosts from the available hosts list (default: false ). *bool false count Must be used with Random , will cause Count times Nodes to be randomly selected from all applicable hosts. int true hosts Static list of hosts (this list is not checked for accuracy) []string true hostSelector \\\"Label\\\" selector for the dynamically generated hosts list, e.g., Kubernetes label selector map[string]string true antiAffinity AntiAffinity not implemented yet []string false Back to TOC IPerf3 \u00b6 IPerf3 IPerf3 config structure for testers.Tester config Field Description Scheme Required Validation additionalFlags Additional flags for client and server AdditionalFlags false duration Duration Time in seconds the IPerf3 test should transmit / receive (default: 10 ). In case of the Ansible Runner, you need to increase the Ansible runners timeouts.taskCommandTimeout option when increasing the Duration. The Ansible Runner timeouts.taskCommandTimeout option should be set to Duration + some extra time (e.g., 10 seconds). *int false required,min=1 interval Interval Interval in seconds which IPerf3 will print / return periodic throughput reports (default: 1 ). *int false required,min=1 udp If UDP should be used for the IPerf3 test *bool false Back to TOC KubernetesHosts \u00b6 KubernetesHosts hosts selection options for Kubernetes Field Description Scheme Required Validation ignoreSchedulingDisabled If Nodes that are SchedulingDisabled should be ignored (default: true ) *bool false tolerations List of Kubernetes corev1.Toleration to tolerate when selecting Nodes [] corev1.Toleration false Back to TOC KubernetesServiceAccounts \u00b6 KubernetesServiceAccounts server and client ServiceAccount name to use for the created Pods Field Description Scheme Required Validation server Server ServiceAccount name to use for server Pods string false clients Clients ServiceAccount name to use for client Pods string false Back to TOC KubernetesTimeouts \u00b6 KubernetesTimeouts timeouts for operations with the Kubernetess API (in secconds) Field Description Scheme Required Validation deleteTimeout Timeout for object deletion in seconds (default: 20 ) int false runningTimeout Timeout for \\\"Pod running\\\" check in seconds (default: 60 ) int false succeedTimeout Timeout for \\\"Pod succeded\\\" check in seconds (e.g., client Pod exits after Pod; default: 60 ) int false Back to TOC MySQL \u00b6 MySQL MySQL Output config options Field Description Scheme Required Validation dsn MySQL DSN, format [username[:password]@][protocol[(address)]]/dbname[?param1=value1&...&paramN=valueN] , for more information see GitHub go-sql-driver/mysql - DSN (Data Source Name) string true tableNamePattern Pattern used for templating the name of the table used in the MySQL database, the tables are created automatically when MySQL.AutoCreateTables is set to true string true autoCreateTables Automatically create tables in the MySQL database (default: true ) *bool false Back to TOC Output \u00b6 Output Output config structure pointing to the other config options for each output Field Description Scheme Required Validation name Name of this output string true required,min=3 csv CSV output options * CSV true goChart GoChart output options * GoChart true dump Dump output options * Dump true excelize Excelize output options * Excelize true sqlite SQLite output options * SQLite true mysql MySQL output options * MySQL true transformations Transformations transformations to be applied to the output data for the chosen output []* Transformation false Back to TOC PingParsing \u00b6 PingParsing PingParsing config structure for testers.Tester config Field Description Scheme Required Validation count Count How many pings should be sent (default: 10 ) *int true required,min=1 deadline Deadline Quote from pingparsing help output: \\\"Timeout before ping exits. valid time units are: d/day/days, h/hour/hours, m/min/mins/minute/minutes, s/sec/secs/second/seconds, ms/msec/msecs/millisecond/milliseconds, us/usec/usecs/microsecond/microseconds. if no unit string found, considered seconds as the time unit. see also ping(8) [-w deadline] option description. note: meaning of the 'deadline' may differ system to system.\\\" (default: 15s ) *time.Duration false timeout Timeout Quote from the pingparsing help output: \\\"Time to wait for a response per packet. Valid time units are: d/day/days, h/hour/hours, m/min/mins/minute/minutes, s/sec/secs/second/seconds, ms/msec/msecs/millisecond/milliseconds, us/usec/usecs/microsecond/microseconds. if no unit string found, considered milliseconds as the time unit. Attempt to send packets with milliseconds granularity in default. If the system does not support timeout in milliseconds, round up as seconds. Use system default if not specified. This option will be ignored if the system does not support timeout itself. See also ping(8) [-W timeout] option description. note: meaning of the 'timeout' may differ system to system.\\\" (default: 10s ) *time.Duration false interface Interface network interface to use for sending the pings. string false Back to TOC RunOptions \u00b6 RunOptions options for running the tasks Field Description Scheme Required Validation continueOnError Continue on error during test runs (recommended to set to true ) (default: is true ) *bool false rounds Amount of test rounds (repetitions) to do for a test plan (default: 1 ) int false interval Time interval to sleep / wait between (default: 10s ) time.Duration false mode Run mode can be parallel or sequential (see RunMode , default: is sequential ) RunMode false parallelCount NOT IMPLEMENTED YET amount of test tasks to run when using RunModeParallel (value: parallel ). int false Back to TOC Runner \u00b6 Runner structure with all available runners config options Field Description Scheme Required Validation name Name of the runner string true kubernetes Kubernetes runner options * RunnerKubernetes true ansible Ansible runner options * RunnerAnsible true mock Mock runner options (userd for testing purposes) * RunnerMock true Back to TOC RunnerAnsible \u00b6 RunnerAnsible Ansible Runner config options Field Description Scheme Required Validation inventoryFilePath InventoryFilePath Path to inventory file to use string true groups Groups server and clients group names * AnsibleGroups true ansibleCommand Path to the ansible command (if empty will be searched for in PATH ; default: ansble ) string false ansibleInventoryCommand Path to the ansible-inventory command (if empty will be searched for in PATH ; default: ansble-inventory ) string false timeouts Timeout settings for ansible command runs * AnsibleTimeouts false commandRetries CommandRetries amount of tries before to fail waiting for the server (main) task to start (default: 10 ) *int false parallelHostFactCalls ParallelHostFactCalls the amount of host facts calls to make in parallel (default: 7 ) *int false Back to TOC RunnerKubernetes \u00b6 RunnerKubernetes Kubernetes Runner config options Field Description Scheme Required Validation inClusterConfig If the Kubernetes client should use the in-cluster config for the cluster communication bool true kubeconfig Path to your kubeconfig file, if not set the following order will be tried out, KUBECONFIG and $HOME/.kube/config string false image The image used for the spawned Pods for the tests (default: quay.io/galexrt/container-toolbox:v20210915-101121-713 ) string false namespace Namespace to execute the tests in string true max=63 hostNetwork If hostNetwork mode should be used for the test Pods *bool false timeouts Timeout settings for operations against the Kubernetes API * KubernetesTimeouts false annotations Annotations to put on the test Pods map[string]string false hosts Host selection specific options * KubernetesHosts false serviceaccounts ServiceAccounst to use server and client Pods * KubernetesServiceAccounts false Back to TOC RunnerMock \u00b6 RunnerMock Mock Runner config options (here for good measure) Field Description Scheme Required Validation Back to TOC SQLite \u00b6 SQLite SQLite Output config options Field Description Scheme Required Validation tableNamePattern Pattern used for templating the name of the table used in the SQLite database, the tables are created automatically string true Back to TOC Test \u00b6 Test Config options for each Test Field Description Scheme Required Validation name Test name string true type The tester to use, e.g., for iperf3 set to iperf3 and so on string true runOptions Options for the execution of the test RunOptions false outputs List of Outputs to use for processing data from the testers. [] Output true required,min=1 transformations Transformations transformations to be applied to Output data []* Transformation false hosts Hosts selection for client and server TestHosts true iperf3 IPerf3 tester options * IPerf3 true pingParsing PingParsing tester options * PingParsing true Back to TOC TestHosts \u00b6 TestHosts list of clients and servers hosts for use in the test(s) Field Description Scheme Required Validation clients Static list of hosts to use as clients [] Hosts true required,min=1 servers Static list of hosts to use as server [] Hosts true required,min=1 Back to TOC Transformation \u00b6 Transformation data transformation instructions Field Description Scheme Required Validation key Source name of the (data) column to use for the transformation string true required action Action transformation action to use on the Source key TransformationAction true required,min=3 from Destination used for the \\\"replace\\\" TransformationAction for targetting the key to overwrite string false modifier Modifier value to use in combination with the ModifierAction to modify the values (e.g., settin git to 1000 and ModifierAction to divison will divise the value by 1000) *float64 false modifierAction ModifierAction action to run on the values together with the Modifier ModifierAction true Back to TOC","title":"Config Structure"},{"location":"config-structure/#config-structure","text":"This Document documents the types introduced by Ancientt for configuration to be used by users. NOTE : This document is generated from code comments. When contributing a change to this document please do so by changing the code comments.","title":"Config Structure"},{"location":"config-structure/#table-of-contents","text":"AdditionalFlags AnsibleGroups AnsibleTimeouts CSV Config Dump Excelize FilePath GoChart GoChartGraph Hosts IPerf3 KubernetesHosts KubernetesServiceAccounts KubernetesTimeouts MySQL Output PingParsing RunOptions Runner RunnerAnsible RunnerKubernetes RunnerMock SQLite Test TestHosts Transformation","title":"Table of Contents"},{"location":"config-structure/#additionalflags","text":"AdditionalFlags additional flags structure for Server and Clients Field Description Scheme Required Validation clients List of additional flags for clients []string false server List of additional flags for server []string false Back to TOC","title":"AdditionalFlags"},{"location":"config-structure/#ansiblegroups","text":"AnsibleGroups server and clients host group names in the used inventory file(s) Field Description Scheme Required Validation server Server inventory server group name string true clients Clients inventory clients group name string true Back to TOC","title":"AnsibleGroups"},{"location":"config-structure/#ansibletimeouts","text":"AnsibleTimeouts timeouts for Ansible command runs Field Description Scheme Required Validation commandTimeout Timeout duration for ansible and ansible-inventory calls (NOT task command timeouts; default: 20s ) time.Duration false taskCommandTimeout Timeout duration for ansible Task command calls (default: 45s ) time.Duration false Back to TOC","title":"AnsibleTimeouts"},{"location":"config-structure/#csv","text":"CSV CSV Output config options Field Description Scheme Required Validation separator Separator which rune to use as a separator in the CSV file (default: ; ). *rune true Back to TOC","title":"CSV"},{"location":"config-structure/#config","text":"Config Config object for the config file Field Description Scheme Required Validation version Version right now is just 0 , so we can keep track of config structure versioning. string true runner Runner Runner configuration to use. Runner true tests Tests List of Test s to run. []* Test true required,min=1 Back to TOC","title":"Config"},{"location":"config-structure/#dump","text":"Dump Dump Output config options Field Description Scheme Required Validation Back to TOC","title":"Dump"},{"location":"config-structure/#excelize","text":"Excelize Excelize Output config options. TODO implement Field Description Scheme Required Validation saveAfterRows After what amount of rows the Excel file should be saved (default: 1 ) int false required,min=1 Back to TOC","title":"Excelize"},{"location":"config-structure/#filepath","text":"FilePath file path and name pattern for outputs file generation Field Description Scheme Required Validation filePath File base path for output string true required,min=1 namePattern File name pattern templated from various availables during output generation string true required,min=1 Back to TOC","title":"FilePath"},{"location":"config-structure/#gochart","text":"GoChart GoChart Output config options Field Description Scheme Required Validation graphs Graphs definitions of graphs to produce from the testers output data []* GoChartGraph true required,min=1 Back to TOC","title":"GoChart"},{"location":"config-structure/#gochartgraph","text":"GoChartGraph Type and columns for a one or two Y-axis chart (+ X-axis) to be generated based on this information. Field Description Scheme Required Validation timeColumn TimeColumn column with the time / interval to use for the X-axis string true required leftY LeftY name of the column / data column to use for the the left Y axis string false rightY RightY name of the column / data column to use for the the right Y axis string true required withLinearRegression WithLinearRegression if a linear regression series should be added to each data series (default: false ). *bool false withSimpleMovingAverage WithSimpleMovingAverage if a simple moving average should be added to each data series(default: false ). *bool false Back to TOC","title":"GoChartGraph"},{"location":"config-structure/#hosts","text":"Hosts options for hosts selection for a Test Field Description Scheme Required Validation name Name of this hosts selection. string true all If all hosts available should be used (default: false ). *bool false random Select Count Random hosts from the available hosts list (default: false ). *bool false count Must be used with Random , will cause Count times Nodes to be randomly selected from all applicable hosts. int true hosts Static list of hosts (this list is not checked for accuracy) []string true hostSelector \\\"Label\\\" selector for the dynamically generated hosts list, e.g., Kubernetes label selector map[string]string true antiAffinity AntiAffinity not implemented yet []string false Back to TOC","title":"Hosts"},{"location":"config-structure/#iperf3","text":"IPerf3 IPerf3 config structure for testers.Tester config Field Description Scheme Required Validation additionalFlags Additional flags for client and server AdditionalFlags false duration Duration Time in seconds the IPerf3 test should transmit / receive (default: 10 ). In case of the Ansible Runner, you need to increase the Ansible runners timeouts.taskCommandTimeout option when increasing the Duration. The Ansible Runner timeouts.taskCommandTimeout option should be set to Duration + some extra time (e.g., 10 seconds). *int false required,min=1 interval Interval Interval in seconds which IPerf3 will print / return periodic throughput reports (default: 1 ). *int false required,min=1 udp If UDP should be used for the IPerf3 test *bool false Back to TOC","title":"IPerf3"},{"location":"config-structure/#kuberneteshosts","text":"KubernetesHosts hosts selection options for Kubernetes Field Description Scheme Required Validation ignoreSchedulingDisabled If Nodes that are SchedulingDisabled should be ignored (default: true ) *bool false tolerations List of Kubernetes corev1.Toleration to tolerate when selecting Nodes [] corev1.Toleration false Back to TOC","title":"KubernetesHosts"},{"location":"config-structure/#kubernetesserviceaccounts","text":"KubernetesServiceAccounts server and client ServiceAccount name to use for the created Pods Field Description Scheme Required Validation server Server ServiceAccount name to use for server Pods string false clients Clients ServiceAccount name to use for client Pods string false Back to TOC","title":"KubernetesServiceAccounts"},{"location":"config-structure/#kubernetestimeouts","text":"KubernetesTimeouts timeouts for operations with the Kubernetess API (in secconds) Field Description Scheme Required Validation deleteTimeout Timeout for object deletion in seconds (default: 20 ) int false runningTimeout Timeout for \\\"Pod running\\\" check in seconds (default: 60 ) int false succeedTimeout Timeout for \\\"Pod succeded\\\" check in seconds (e.g., client Pod exits after Pod; default: 60 ) int false Back to TOC","title":"KubernetesTimeouts"},{"location":"config-structure/#mysql","text":"MySQL MySQL Output config options Field Description Scheme Required Validation dsn MySQL DSN, format [username[:password]@][protocol[(address)]]/dbname[?param1=value1&...&paramN=valueN] , for more information see GitHub go-sql-driver/mysql - DSN (Data Source Name) string true tableNamePattern Pattern used for templating the name of the table used in the MySQL database, the tables are created automatically when MySQL.AutoCreateTables is set to true string true autoCreateTables Automatically create tables in the MySQL database (default: true ) *bool false Back to TOC","title":"MySQL"},{"location":"config-structure/#output","text":"Output Output config structure pointing to the other config options for each output Field Description Scheme Required Validation name Name of this output string true required,min=3 csv CSV output options * CSV true goChart GoChart output options * GoChart true dump Dump output options * Dump true excelize Excelize output options * Excelize true sqlite SQLite output options * SQLite true mysql MySQL output options * MySQL true transformations Transformations transformations to be applied to the output data for the chosen output []* Transformation false Back to TOC","title":"Output"},{"location":"config-structure/#pingparsing","text":"PingParsing PingParsing config structure for testers.Tester config Field Description Scheme Required Validation count Count How many pings should be sent (default: 10 ) *int true required,min=1 deadline Deadline Quote from pingparsing help output: \\\"Timeout before ping exits. valid time units are: d/day/days, h/hour/hours, m/min/mins/minute/minutes, s/sec/secs/second/seconds, ms/msec/msecs/millisecond/milliseconds, us/usec/usecs/microsecond/microseconds. if no unit string found, considered seconds as the time unit. see also ping(8) [-w deadline] option description. note: meaning of the 'deadline' may differ system to system.\\\" (default: 15s ) *time.Duration false timeout Timeout Quote from the pingparsing help output: \\\"Time to wait for a response per packet. Valid time units are: d/day/days, h/hour/hours, m/min/mins/minute/minutes, s/sec/secs/second/seconds, ms/msec/msecs/millisecond/milliseconds, us/usec/usecs/microsecond/microseconds. if no unit string found, considered milliseconds as the time unit. Attempt to send packets with milliseconds granularity in default. If the system does not support timeout in milliseconds, round up as seconds. Use system default if not specified. This option will be ignored if the system does not support timeout itself. See also ping(8) [-W timeout] option description. note: meaning of the 'timeout' may differ system to system.\\\" (default: 10s ) *time.Duration false interface Interface network interface to use for sending the pings. string false Back to TOC","title":"PingParsing"},{"location":"config-structure/#runoptions","text":"RunOptions options for running the tasks Field Description Scheme Required Validation continueOnError Continue on error during test runs (recommended to set to true ) (default: is true ) *bool false rounds Amount of test rounds (repetitions) to do for a test plan (default: 1 ) int false interval Time interval to sleep / wait between (default: 10s ) time.Duration false mode Run mode can be parallel or sequential (see RunMode , default: is sequential ) RunMode false parallelCount NOT IMPLEMENTED YET amount of test tasks to run when using RunModeParallel (value: parallel ). int false Back to TOC","title":"RunOptions"},{"location":"config-structure/#runner","text":"Runner structure with all available runners config options Field Description Scheme Required Validation name Name of the runner string true kubernetes Kubernetes runner options * RunnerKubernetes true ansible Ansible runner options * RunnerAnsible true mock Mock runner options (userd for testing purposes) * RunnerMock true Back to TOC","title":"Runner"},{"location":"config-structure/#runneransible","text":"RunnerAnsible Ansible Runner config options Field Description Scheme Required Validation inventoryFilePath InventoryFilePath Path to inventory file to use string true groups Groups server and clients group names * AnsibleGroups true ansibleCommand Path to the ansible command (if empty will be searched for in PATH ; default: ansble ) string false ansibleInventoryCommand Path to the ansible-inventory command (if empty will be searched for in PATH ; default: ansble-inventory ) string false timeouts Timeout settings for ansible command runs * AnsibleTimeouts false commandRetries CommandRetries amount of tries before to fail waiting for the server (main) task to start (default: 10 ) *int false parallelHostFactCalls ParallelHostFactCalls the amount of host facts calls to make in parallel (default: 7 ) *int false Back to TOC","title":"RunnerAnsible"},{"location":"config-structure/#runnerkubernetes","text":"RunnerKubernetes Kubernetes Runner config options Field Description Scheme Required Validation inClusterConfig If the Kubernetes client should use the in-cluster config for the cluster communication bool true kubeconfig Path to your kubeconfig file, if not set the following order will be tried out, KUBECONFIG and $HOME/.kube/config string false image The image used for the spawned Pods for the tests (default: quay.io/galexrt/container-toolbox:v20210915-101121-713 ) string false namespace Namespace to execute the tests in string true max=63 hostNetwork If hostNetwork mode should be used for the test Pods *bool false timeouts Timeout settings for operations against the Kubernetes API * KubernetesTimeouts false annotations Annotations to put on the test Pods map[string]string false hosts Host selection specific options * KubernetesHosts false serviceaccounts ServiceAccounst to use server and client Pods * KubernetesServiceAccounts false Back to TOC","title":"RunnerKubernetes"},{"location":"config-structure/#runnermock","text":"RunnerMock Mock Runner config options (here for good measure) Field Description Scheme Required Validation Back to TOC","title":"RunnerMock"},{"location":"config-structure/#sqlite","text":"SQLite SQLite Output config options Field Description Scheme Required Validation tableNamePattern Pattern used for templating the name of the table used in the SQLite database, the tables are created automatically string true Back to TOC","title":"SQLite"},{"location":"config-structure/#test","text":"Test Config options for each Test Field Description Scheme Required Validation name Test name string true type The tester to use, e.g., for iperf3 set to iperf3 and so on string true runOptions Options for the execution of the test RunOptions false outputs List of Outputs to use for processing data from the testers. [] Output true required,min=1 transformations Transformations transformations to be applied to Output data []* Transformation false hosts Hosts selection for client and server TestHosts true iperf3 IPerf3 tester options * IPerf3 true pingParsing PingParsing tester options * PingParsing true Back to TOC","title":"Test"},{"location":"config-structure/#testhosts","text":"TestHosts list of clients and servers hosts for use in the test(s) Field Description Scheme Required Validation clients Static list of hosts to use as clients [] Hosts true required,min=1 servers Static list of hosts to use as server [] Hosts true required,min=1 Back to TOC","title":"TestHosts"},{"location":"config-structure/#transformation","text":"Transformation data transformation instructions Field Description Scheme Required Validation key Source name of the (data) column to use for the transformation string true required action Action transformation action to use on the Source key TransformationAction true required,min=3 from Destination used for the \\\"replace\\\" TransformationAction for targetting the key to overwrite string false modifier Modifier value to use in combination with the ModifierAction to modify the values (e.g., settin git to 1000 and ModifierAction to divison will divise the value by 1000) *float64 false modifierAction ModifierAction action to run on the values together with the Modifier ModifierAction true Back to TOC","title":"Transformation"},{"location":"demos/","text":"Demos \u00b6 This page contains demos of ancientt in action. Each demo has an asciinema recording , the used testdefinition.yaml and depending on the used output format a short snippet or the whole output available. Kubernetes: iperf3 One Random Node to All Kubernetes Nodes \u00b6 testdefinition.yaml : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 version : '0' runner : name : kubernetes kubernetes : kubeconfig : .kube/config image : quay.io/galexrt/container-toolbox:v20210915-101121-713 hosts : ignoreSchedulingDisabled : true tests : - name : iperf3-one-to-all type : iperf3 outputs : - name : csv csv : filePath : ./results namePattern : 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}.csv' runOptions : continueOnError : true rounds : 1 hosts : clients : - name : all-hosts all : true servers : - name : one-host count : 1 random : true iperf3 : additionalFlags : clients : [ \"--interval=1\" ] server : [ \"--interval=1\" ] Output `csv (partial snippet): 1 2 3 4 5 6 7 8 9 test_time,round,tester,server_host,client_host,socket,start,end,seconds,bytes,bits_per_second,retransmits,snd_cwnd,rtt,rttvar,pmtu,omitted,iperf3_version,system_info,additional_info 2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,0.000000,1.000295,1.000295,1982632968,15856387318.277708,0,3191392,308,384,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,1.000295,2.000191,0.999896,2487746560,19904041515.077232,0,3191392,246,310,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,2.000191,3.000123,0.999932,2199388160,17596300936.243999,0,3191392,761,622,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,3.000123,4.000487,1.000364,2596536320,20764735793.626110,0,3191392,262,322,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 [...] 2019-09-24T20:43:29+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-02,5,0.000000,1.000507,1.000507,176868460,1414230500.636069,819,1107216,5421,1645,1450,false,iperf 3.6,Linux ancientt-client-iperf3-6ca1e56296767da8d29adf6c8bba8ba6fc32fce4 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-6ca1e56296767da8d29adf6c8bba8ba6fc32fce4 [...] 2019-09-24T20:43:43+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-03,5,9.000335,10.000137,0.999802,192675840,1541711805.372557,289,1077858,3027,325,1450,false,iperf 3.6,Linux ancientt-client-iperf3-af06030e7b7611f917582390fb1db0e38e799c08 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-af06030e7b7611f917582390fb1db0e38e799c08 More demos to come soon \u00b6 There will soon be more demos, about the different runners, testers and outputs available in ancientt .","title":"Demos"},{"location":"demos/#demos","text":"This page contains demos of ancientt in action. Each demo has an asciinema recording , the used testdefinition.yaml and depending on the used output format a short snippet or the whole output available.","title":"Demos"},{"location":"demos/#kubernetes-iperf3-one-random-node-to-all-kubernetes-nodes","text":"testdefinition.yaml : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 version : '0' runner : name : kubernetes kubernetes : kubeconfig : .kube/config image : quay.io/galexrt/container-toolbox:v20210915-101121-713 hosts : ignoreSchedulingDisabled : true tests : - name : iperf3-one-to-all type : iperf3 outputs : - name : csv csv : filePath : ./results namePattern : 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}.csv' runOptions : continueOnError : true rounds : 1 hosts : clients : - name : all-hosts all : true servers : - name : one-host count : 1 random : true iperf3 : additionalFlags : clients : [ \"--interval=1\" ] server : [ \"--interval=1\" ] Output `csv (partial snippet): 1 2 3 4 5 6 7 8 9 test_time,round,tester,server_host,client_host,socket,start,end,seconds,bytes,bits_per_second,retransmits,snd_cwnd,rtt,rttvar,pmtu,omitted,iperf3_version,system_info,additional_info 2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,0.000000,1.000295,1.000295,1982632968,15856387318.277708,0,3191392,308,384,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,1.000295,2.000191,0.999896,2487746560,19904041515.077232,0,3191392,246,310,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,2.000191,3.000123,0.999932,2199388160,17596300936.243999,0,3191392,761,622,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,3.000123,4.000487,1.000364,2596536320,20764735793.626110,0,3191392,262,322,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 [...] 2019-09-24T20:43:29+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-02,5,0.000000,1.000507,1.000507,176868460,1414230500.636069,819,1107216,5421,1645,1450,false,iperf 3.6,Linux ancientt-client-iperf3-6ca1e56296767da8d29adf6c8bba8ba6fc32fce4 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-6ca1e56296767da8d29adf6c8bba8ba6fc32fce4 [...] 2019-09-24T20:43:43+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-03,5,9.000335,10.000137,0.999802,192675840,1541711805.372557,289,1077858,3027,325,1450,false,iperf 3.6,Linux ancientt-client-iperf3-af06030e7b7611f917582390fb1db0e38e799c08 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-af06030e7b7611f917582390fb1db0e38e799c08","title":"Kubernetes: iperf3 One Random Node to All Kubernetes Nodes"},{"location":"demos/#more-demos-to-come-soon","text":"There will soon be more demos, about the different runners, testers and outputs available in ancientt .","title":"More demos to come soon"},{"location":"outputs/sql-based/","text":"SQL-based \u00b6 For SQL based outputs (e.g., mysql , sqlite ) these are example queries for (the queries assume that the table name with the results is named iperf3results ). Be sure to specify iperf3results as the table name in the SQL based output's config. NOTE Using mysql output will by default autogenerate the tables necessary, unless the autoCreateTables has been set to `false. `sqlite output will always create the tables when they don't exist. CREATE TABLE \u00b6 NOTE This is only necessary if you, e.g., want to import existing CSV results. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 CREATE TABLE ` iperf3results ` ( ` test_time ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` round ` int ( 11 ) DEFAULT NULL , ` tester ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` server_host ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` client_host ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` socket ` int ( 11 ) DEFAULT NULL , ` start ` float DEFAULT NULL , ` end ` float DEFAULT NULL , ` seconds ` float DEFAULT NULL , ` bytes ` bigint ( 20 ) DEFAULT NULL , ` bits_per_second ` float DEFAULT NULL , ` retransmits ` bigint ( 20 ) DEFAULT NULL , ` snd_cwnd ` bigint ( 20 ) DEFAULT NULL , ` rtt ` bigint ( 20 ) DEFAULT NULL , ` rttvar ` bigint ( 20 ) DEFAULT NULL , ` pmtu ` int ( 11 ) DEFAULT NULL , ` omitted ` tinyint ( 1 ) DEFAULT NULL , ` iperf3_version ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` system_info ` varchar ( 300 ) COLLATE utf8_bin DEFAULT NULL , ` additional_info ` varchar ( 255 ) COLLATE utf8_bin DEFAULT NULL ) ENGINE = InnoDB DEFAULT CHARSET = utf8 COLLATE = utf8_bin COMMENT = ' ' ; SELECT Queries \u00b6 Averaged Gbps grouped by round , server_host and client_host \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 SELECT test_time , server_host , client_host , AVG ( bits_per_second ) AS bits_per_second_avg , AVG ( bits_per_second / 1000000000 ) AS gbps_avg , AVG ( rtt ) AS rtt_avg , SUM ( retransmits ) AS total_retransmits FROM ` iperf3results ` WHERE server_host != client_host GROUP BY round , server_host , client_host ORDER BY gbps_avg DESC ;","title":"SQL-based"},{"location":"outputs/sql-based/#sql-based","text":"For SQL based outputs (e.g., mysql , sqlite ) these are example queries for (the queries assume that the table name with the results is named iperf3results ). Be sure to specify iperf3results as the table name in the SQL based output's config. NOTE Using mysql output will by default autogenerate the tables necessary, unless the autoCreateTables has been set to `false. `sqlite output will always create the tables when they don't exist.","title":"SQL-based"},{"location":"outputs/sql-based/#create-table","text":"NOTE This is only necessary if you, e.g., want to import existing CSV results. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 CREATE TABLE ` iperf3results ` ( ` test_time ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` round ` int ( 11 ) DEFAULT NULL , ` tester ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` server_host ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` client_host ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` socket ` int ( 11 ) DEFAULT NULL , ` start ` float DEFAULT NULL , ` end ` float DEFAULT NULL , ` seconds ` float DEFAULT NULL , ` bytes ` bigint ( 20 ) DEFAULT NULL , ` bits_per_second ` float DEFAULT NULL , ` retransmits ` bigint ( 20 ) DEFAULT NULL , ` snd_cwnd ` bigint ( 20 ) DEFAULT NULL , ` rtt ` bigint ( 20 ) DEFAULT NULL , ` rttvar ` bigint ( 20 ) DEFAULT NULL , ` pmtu ` int ( 11 ) DEFAULT NULL , ` omitted ` tinyint ( 1 ) DEFAULT NULL , ` iperf3_version ` varchar ( 100 ) COLLATE utf8_bin DEFAULT NULL , ` system_info ` varchar ( 300 ) COLLATE utf8_bin DEFAULT NULL , ` additional_info ` varchar ( 255 ) COLLATE utf8_bin DEFAULT NULL ) ENGINE = InnoDB DEFAULT CHARSET = utf8 COLLATE = utf8_bin COMMENT = ' ' ;","title":"CREATE TABLE"},{"location":"outputs/sql-based/#select-queries","text":"","title":"SELECT Queries"},{"location":"outputs/sql-based/#averaged-gbps-grouped-by-round-server_host-and-client_host","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 SELECT test_time , server_host , client_host , AVG ( bits_per_second ) AS bits_per_second_avg , AVG ( bits_per_second / 1000000000 ) AS gbps_avg , AVG ( rtt ) AS rtt_avg , SUM ( retransmits ) AS total_retransmits FROM ` iperf3results ` WHERE server_host != client_host GROUP BY round , server_host , client_host ORDER BY gbps_avg DESC ;","title":"Averaged Gbps grouped by round, server_host and client_host"}]}